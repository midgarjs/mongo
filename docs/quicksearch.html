<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Documentation Classes MongoMigrateStorageMongoPluginMongoService Events event:@midgar/mongo:afterLoadModels Classes Classes MongoMigrateStorage MongoPlugin MongoService Events @midgar/mongo:afterLoadModels afterLoadModels event. × Search results Close Documentation generated by JSDoc 3.6.3 on 2020-01-02T16:56:47+00:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Classes MongoMigrateStorageMongoPluginMongoService Events event:@midgar/mongo:afterLoadModels @midgar/mongo Intégration de Moogoose pour Midgar Installation $ npm i @midgar/mongo --save Si tout s'est bien passé, un message de confirmation s'affiche: #midgar-cli @midgar/mongo added to plugins.json ! Configuration Vous devez ajouter la confuguration suviante a votre projet avec un uri valide: mongo: { default: { uri: 'mongodb://localhost:27017/midgar?connectTimeoutMS=1000', } } Vous devez ajouter plusieur connection à la configuration: mongo: { default: { uri: 'mongodb://localhost:27017/midgar?connectTimeoutMS=1000', }, otherConnexion: { uri: 'mongodb://localhost:27017/otherDb?connectTimeoutMS=1000', } } Fonctionnement Ajoute un dossier de plugin midgar-mongo-models: ./mongo-models/. Fichier model const name = 'namespace:monmodel' export default { name, getModel (mongoose) { const schema = mongoose.Schema({ name: { type: String, required: true }, description: { type: String, required: true }, type: { type: String, required: true } }) return mongoose.model(name, schema) } } Vous trouverez plus d'ingormations dans la documentation de Mongoose Migration Ce plugin ajoute un storage pour @midgar/migrate Exemple de fichier export default { up: async (mid, mongoService) =&gt; { const MonModel = mongoService.getModel('namespace:monmodel') const pulpFiction = new MonModel({ name: 'Pulp Fiction', description: 'L\\'odyssée sanglante et burlesque de petits malfrats dans la jungle de Hollywoo.' type: 'film' }) await pulpFiction.save() }, down: async (mid, mongoService) =&gt; { const pulpFiction = mongoService.getModel('namespace:monmodel') pulpFiction.deleteOne({ name: 'Pulp Fiction' }) } } × Search results Close Documentation generated by JSDoc 3.6.3 on 2020-01-02T16:56:47+00:00 using the DocStrap template. "},"MongoMigrateStorage.html":{"id":"MongoMigrateStorage.html","title":"Class: MongoMigrateStorage","body":" Documentation Classes MongoMigrateStorageMongoPluginMongoService Events event:@midgar/mongo:afterLoadModels Class: MongoMigrateStorage MongoMigrateStorage MongoMigrateStorage class Migration storage for MongoPlugin new MongoMigrateStorage() Methods &lt;async&gt; deleteMigration(plugin, name, type) Delete executed version in database Parameters: Name Type Description plugin string Plugin name name string Migration file name type string Migration type (schema|data) Returns: Sequelize version model Type Migration &lt;async&gt; saveMigration(plugin, name, type) Save executed version in database Parameters: Name Type Description plugin string Plugin name name string Migration file name type string Migration type (schema|data) Returns: Sequelize version model Type Migration × Search results Close Documentation generated by JSDoc 3.6.3 on 2020-01-02T16:56:47+00:00 using the DocStrap template. "},"MongoPlugin.html":{"id":"MongoPlugin.html","title":"Class: MongoPlugin","body":" Documentation Classes MongoMigrateStorageMongoPluginMongoService Events event:@midgar/mongo:afterLoadModels Class: MongoPlugin MongoPlugin MongoPlugin new MongoPlugin() Members modelsDirKey :String Model dir key Type: String Methods &lt;async&gt; init() Init plugin × Search results Close Documentation generated by JSDoc 3.6.3 on 2020-01-02T16:56:47+00:00 using the DocStrap template. "},"MongoService.html":{"id":"MongoService.html","title":"Class: MongoService","body":" Documentation Classes MongoMigrateStorageMongoPluginMongoService Events event:@midgar/mongo:afterLoadModels Class: MongoService MongoService Mongo service new MongoService() Methods addModel(name, Model) Add a model Parameters: Name Type Description name String Model name Model Model Mogoose model getConnexion(name) Return a Mongoose instance Parameters: Name Type Description name String Connexion name Returns: Type Mongoose getModel(name) Return a Mongo model by name Parameters: Name Type Description name String Model name Returns: Type Model &lt;async&gt; init() Int db connexions &lt;async&gt; loadModels() load plugins models × Search results Close Documentation generated by JSDoc 3.6.3 on 2020-01-02T16:56:47+00:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
